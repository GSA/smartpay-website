---
import PageLayout from '../../layouts/PageLayout.astro';
import SideNav from '../../components/SinglePageSideNav.astro'
import { getCollection} from 'astro:content';
const pages = await getCollection('faq');
pages.sort((a, b) => (a.data.order) - b.data.order)

const content_components = pages.map(async entry => (
  {...entry, ...(await entry.render())}
))
const entries = await Promise.all(content_components)
const headings = entries.map(entry => entry.headings[0])

---
<PageLayout title="Frequent Asked Questions">
  <SideNav 
  title="Frequently Asked Questions"
  headings ={headings}
/>
  <div class="usa-layout-docs__main desktop:grid-col-8 usa-prose usa-layout-docs">
    <h1>Frequently Asked Questions</h1>
    {entries.map(item => (  
      <div>
        <item.Content />
      </div>
    ))}
  </div>
</PageLayout>
<script >
  import {handleAccordionSearch, increaseHeadingLevels} from "../../assets/js/faqHelper.js"
  handleAccordionSearch();
  increaseHeadingLevels();
</script>
